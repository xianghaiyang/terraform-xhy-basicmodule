一、 难点处理

1. 试想思路：根据目的资源查询可用地区。将可用区作为交换机查询参数，得到可用区中的交换机(No)

2. 变量的传递 ： 外层variable >> main函数的键 >> 内层variable的键 >> 最终被内层main.tf引用
   (这里面有一次真正意义的传递——要保证外层main的键 = 内层variable的键)

3. 因技术有限，面对指定资源规格在部分可用区不存在的情况（用交换机列表[0]解决/手动指定自己的）。如果提示没有该规格，请更换列表下标

4. eip(弹性公网ip)，实例资源和eip是一对一匹配关系。
   该框架中，eip可同时创建多个，与此同时，务必传入相应数目的实例id(实例可以是：支持输入NAT网关实例ID、负载均衡SLB实例ID、云服务器ECS实例ID)

5. 根目录下的main.tf文件中的module下，有availability_zones = "${module.vpc.availability_zones}"
   通过module引用，实际是以根目录为基础，去引用各个子文件夹里的output.tf

6. 入网使用slb，出网使用nat网关

7. 新型nat网关实例可绑定一个交换机，然后出网入网均可绑定任意交换机


二、 各种资源创建方案

1. 关于vpc:      后台逻辑支持创建一个vpc，之后的基本所有资源都是在该vpc下，如若同一地区还需要建立多个vpc且共用一个state状态文件，可从内部或者外部新建客户端module。

2. 关于vswitch： 后台逻辑在每个可用区下均创建一个vswitch，你需要提供该地区下的可用区情况作为参数

3. 关于ECS：     后台逻辑根据你提供的交换机id，在指定交换机下创建指定数量的ECS。如若未指定交换机，将在随机交换机下创建指定数量的ECS

4. 关于slb：     后台逻辑根据你提供的交换机id创建一个 内网slb，并自动绑定所有ECS实例。如若未指定交换机，将在随机交换机下创建指定数量的ECS。
                当address_type选择公网时，交换机会被忽略。即address_type优先级大于slb_vswitch_id

5. 关于eip：     后台逻辑可创建多个eip，并根据你提供的资源id
               （可以是NAT网关实例ID、负载均衡SLB实例ID、云服务器ECS实例ID、辅助弹性网卡实例ID、高可用虚拟IP实例ID），
                给这些资源分别添加弹性公网。注意，创建几个eip，就需要传入几个资源id（注意eip并非vpc下的资源）

6. 关于mongodb： 后台逻辑根据你提供的交换机id，在指定交换机下创建指定数量的mongo实例。如若未指定交换机，将在随机交换机下创建指定数量的mongo实例

7. 关于rocketMQ: 测试后发现http协议的group创建成功，但是控制台报错，同时会无法释放。
                所以后台优化成，创建一个实例，一个tcp组，根据count_topic创建一个或多个topic


三、Tips

1. 项目文件夹不建议大写(出现过BUG)


